@using Web_TracNghiem_HTSV.Services;
@model PaginatedList<Web_TracNghiem_HTSV.Models.User>

@{
    ViewData["Title"] = "Manage Users";
}

<link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">

<div class="container mx-auto p-4">
    <h1 class="text-4xl font-bold mb-8 text-center text-blue-600">Quản trị User</h1>

    <form asp-controller="UserRoles" asp-action="Index" method="get" class="mb-4">
        <div class="flex items-center">
            <input type="text" name="searchString" value="@ViewData["CurrentFilter"]" placeholder="Search by Username"
                   class="form-input w-full py-2 px-4 border border-gray-300 rounded-l-md focus:ring-blue-500 focus:border-blue-500" />
            <button type="submit" class="bg-blue-500 text-white py-2 px-4 rounded-r-md hover:bg-blue-700">
                Search
            </button>
        </div>
    </form>

    <div class="overflow-x-auto">
        <table class="min-w-full bg-white border rounded-md">
            <thead>
                <tr>
                    <th class="px-4 py-2 border-b">Username</th>
                    <th class="px-4 py-2 border-b">Email</th>
                    <th class="px-4 py-2 border-b">Edit</th>
                    <th class="px-4 py-2 border-b">Delete</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var user in Model.Items)
                {
                    <tr>
                        <td class="px-4 py-2 border-b">@user.UserName</td>
                        <td class="px-4 py-2 border-b">@user.Email</td>
                        <td class="px-4 py-2 border-b">
                            <form asp-action="EditRole" asp-route-id="@user.Id" method="get">
                                <button type="submit" class="bg-yellow-500 text-white py-1 px-3 rounded hover:bg-yellow-700 whitespace-nowrap">
                                    Edit Roles
                                </button>
                            </form>
                        </td>
                        <td class="px-4 py-2 border-b">
                            <form asp-action="Delete" asp-route-id="@user.Id" method="post" onsubmit="return confirm('Are you sure you want to delete this user?');">
                                <button type="submit" class="bg-red-500 text-white py-1 px-3 rounded hover:bg-red-700">
                                    Delete
                                </button>
                            </form>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>

    @{
        var prevDisabled = !Model.HasPreviousPage ? "disabled" : "";
        var nextDisabled = !Model.HasNextPage ? "disabled" : "";
    }

    <nav aria-label="Page navigation" class="pt-3">
        <ul class="pagination">
            <li class="page-item @prevDisabled">
                <a class="page-link" href="?pageNumber=@(Model.PageIndex - 1)&searchString=@ViewData["CurrentFilter"]">Trang trước</a>
            </li>
            <li class="page-item @nextDisabled">
                <a class="page-link" href="?pageNumber=@(Model.PageIndex + 1)&searchString=@ViewData["CurrentFilter"]">Trang sau</a>
            </li>
        </ul>
    </nav>

</div>
